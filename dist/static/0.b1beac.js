webpackJsonp([0],{21:function(e,t){"use strict";function a(e){var t={data:e.data||[],destroy:!0,dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null};e.scrollX&&(t.scrollX=e.scrollX);var a=$("#"+e.id).DataTable(t);return a}function r(e,t,a,r){$("#"+e+" tbody").off(t,a).on(t,a,r)}function d(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=r,t.getTableItem=d},201:function(e,t){"use strict";function a(e){var t=$(e.parent).qtip({content:e.content||"",position:{my:"left center",at:"bottom right",target:$(e.parent)},style:{classes:"qtip-blue qtip-shadow"},show:{event:e.event||"mouseenter"}});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},471:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(5),n=r(d),o=a(6),l=r(o),s=a(3),i=r(s),u=a(4),c=r(u),p=a(8),f=r(p),v=a(7),m=r(v),b=a(2),h=r(b),g=a(183),T=r(g),y=a(21),R=r(y),H=a(201),_=r(H),O=a(217),E=r(O),k=a(197),w=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"描述"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间")),N=(0,n.default)("tr",{},void 0,(0,n.default)("th",{},void 0,"名称"),(0,n.default)("th",{},void 0,"描述"),(0,n.default)("th",{},void 0,"创建人"),(0,n.default)("th",{},void 0,"创建时间"),(0,n.default)("th",{},void 0,"操作")),x=(0,n.default)("button",{type:"submit",name:"createReport",className:"btn btn-primary"},void 0,"新建"),D=function(e){function t(e){(0,i.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.createTable=a.createTable.bind(a),a.addHandler=a.addHandler.bind(a),a.detailHandler=a.detailHandler.bind(a),a.analysisHandler=a.analysisHandler.bind(a),a.editHandler=a.editHandler.bind(a),a.removeHandler=a.removeHandler.bind(a),a.removeOKHandler=a.removeOKHandler.bind(a),a.clickOwnerHandler=a.clickOwnerHandler.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.readReport()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.report.reportsData.result.data),$('button[name = "createReport"]').on("click",this.addHandler)}},{key:"createTable",value:function(e){var t={};t.id="reportList",t.columns=[{data:"reportName",defaultContent:"-"},{data:"desc",defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"createTime",defaultContent:"-"}],t.order=[[3,"desc"]];var a=sessionStorage.getItem("userRolePermission");a.indexOf("REPORT_")!=-1&&(t.columnDefs=[{targets:0,render:function(e,t,a){var r=a.reportName||"",d='<span style="cursor: pointer;" title="'+r+'" > '+(0,k.cutStr)(r,20)+"</span> ";return d}},{targets:1,render:function(e,t,a){var r=a.desc||"",d='<span style="cursor: pointer;" title="'+r+'" > '+(0,k.cutStr)(r,40)+"</span> ";return d}},{targets:2,render:function(e,t,a){var r='<a href="javascript:void(0);" class="owner">'+a.owner+"</a> ";return r}},{targets:4,render:function(e,t,r){var d="",n=sessionStorage.getItem("XDataUserName");return a.indexOf("REPORT_ANALYSIS")!=-1&&(d+="<a href='javascript:void(0);' class='reportAnalysis btn btn-default btn-xs'><i class='fa fa-search'></i> 分析</a> "),a.indexOf("REPORT_QUERY")!=-1&&(d+="<a href='javascript:void(0);'  class='reportDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),a.indexOf("REPORT_MODIFY")!=-1&&r.owner===n&&(d+="<a href='javascript:void(0);' class='reportEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),a.indexOf("REPORT_DELETE")!=-1&&r.owner===n&&(d+="<a href='javascript:void(0);' class='reportRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeReport\"><i class='fa fa-trash-o'></i> 删除</a>"),d}}]),t.data=e,(0,R.default)(t),(0,y.bindTableEvent)("reportList","click","a.reportDetail",this.detailHandler),(0,y.bindTableEvent)("reportList","click","a.reportAnalysis",this.analysisHandler),(0,y.bindTableEvent)("reportList","click","a.reportEdit",this.editHandler),(0,y.bindTableEvent)("reportList","click","a.reportRemove",this.removeHandler),(0,y.bindTableEvent)("reportList","click","a.owner",this.clickOwnerHandler)}},{key:"clickOwnerHandler",value:function(e){var t=E.default.userDetail($(e.currentTarget).text());t=t.result.detail;var a=(0,_.default)({parent:e.currentTarget,event:"click",content:"<dl><dt>用户名：</dt><dd>"+t.userName+"</dd></dl>\n            <dl><dt>姓名：</dt><dd>"+t.name+"</dd></dl>\n            </dl><dl><dt>部门：</dt><dd>"+t.department+"</dd></dl>\n            </dl><dl><dt>职位：</dt><dd>"+t.position+"</dd></dl>\n            </dl><dl><dt>电话：</dt><dd>"+t.phoneNo+"</dd></dl>\n            <dl><dt>邮箱：</dt><dd>"+t.email+"</dd></dl>"}),r=a.qtip("api");r.show()}},{key:"addHandler",value:function(){this.props.history.replace("/report/add")}},{key:"detailHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/detail/"+t.reportName)}},{key:"analysisHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/analysis/"+t.reportName)}},{key:"editHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.history.replace("/report/update/"+t.reportName)}},{key:"removeHandler",value:function(e){var t=$("#reportList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectReport(t),this.refs.delReport.setContent("您确定要删除报表："+t.reportName+"吗？")}},{key:"removeOKHandler",value:function(){var e=[];e.push(this.props.report.selectedRecord.reportName),this.props.delReport(e),$("#removeReport").modal("hide")}},{key:"render",value:function(){var e=w,t=sessionStorage.getItem("userRolePermission");t.indexOf("REPORT_")!=-1&&(e=N);var a="";return sessionStorage.getItem("userRolePermission").indexOf("REPORT_CREATE")!=-1&&(a=x),(0,n.default)("div",{id:"reportManage",className:"box box-primary"},void 0,(0,n.default)("div",{className:"row"},void 0,(0,n.default)("div",{className:"col-md-12"},void 0,(0,n.default)("div",{className:"box-header"},void 0,a),(0,n.default)("div",{className:"box-body"},void 0,(0,n.default)("table",{id:"reportList",className:"table table-striped table-bordered"},void 0,(0,n.default)("thead",{},void 0,e))))),h.default.createElement(T.default,{modalId:"removeReport",ref:"delReport",title:"删除报表",okHandler:this.removeOKHandler}))}}]),t}(b.Component);t.default=D}});