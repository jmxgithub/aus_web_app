webpackJsonp([11],{12:function(e,a){"use strict";function l(e){$(e).iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue",disabledClass:"disabled"})}Object.defineProperty(a,"__esModule",{value:!0}),a.default=l},13:function(e,a){"use strict";function l(e){$("#"+e.id).select2({placeholder:e.placeholder||"请选择",data:e.data||[],multiple:e.multiple||!1,language:e.language||"zh-CN",tags:e.tags||!1,minimumResultsForSearch:e.minimumResultsForSearch||"Infinity"})}function s(e,a,l){$("#"+e).off(a).on(a,l)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=l,a.bindSelectEvent=s},514:function(e,a,l){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var t=l(5),d=s(t),i=l(6),o=s(i),c=l(3),p=s(c),u=l(4),n=s(u),_=l(8),r=s(_),m=l(7),f=s(m),v=l(2),b=s(v),h=l(183),y=s(h),N=l(13),x=s(N),E=l(12),k=s(E),g=(0,d.default)("p",{className:"box-header with-border sp_role_info"},void 0,(0,d.default)("h4",{},void 0,"权限管理")),R=(0,d.default)("div",{className:"col-sm-2 hidden-xs text-right"},void 0,(0,d.default)("p",{className:"sp_role"},void 0,"选择角色 : "),(0,d.default)("p",{className:"sp_role_set"},void 0,"角色权限设置 : ")),A=(0,d.default)("li",{role:"presentation",className:"active"},void 0,(0,d.default)("a",{className:"sp_presentation",href:"#home",role:"tab","data-toggle":"tab"},void 0,"系统权限管理")),D=(0,d.default)("div",{className:"col-xs-2 sp_classify_name text-right sp_users"},void 0,"用户权限: "),S=(0,d.default)("div",{className:" row col-xs-10 text-center"},void 0,(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_users_lookup sp_users_detail sp_detail",name:"USER_QUERY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"查看")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_users_add sp_users_detail sp_detail",name:"USER_CREATE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"新建")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_users_del sp_users_detail sp_detail",name:"USER_DELETE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"删除")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_users_modify sp_users_detail sp_detail",name:"USER_MODIFY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"修改"))),O=(0,d.default)("div",{className:"col-xs-2 sp_classify_name text-right sp_roles"},void 0,"角色权限: "),P=(0,d.default)("div",{className:" row col-xs-10 text-center"},void 0,(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_roles_lookup sp_roles_detail sp_detail",name:"ROLE_QUERY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"查看")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_roles_add sp_roles_detail sp_detail",name:"ROLE_CREATE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"新建")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_roles_del sp_roles_detail sp_detail",name:"ROLE_DELETE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"删除")),(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_roles_modify sp_roles_detail sp_detail",name:"ROLE_MODIFY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"修改"))),T=(0,d.default)("div",{className:"col-xs-2 sp_classify_name text-right sp_dateset"},void 0,"数据集权限: "),C=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dateset_query sp_dateset_detail sp_detail",name:"DATASET_QUERY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"查看")),q=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dateset_add sp_dateset_detail sp_detail",name:"DATASET_CREATE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"新建")),w=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dateset_del sp_dateset_detail sp_detail",name:"DATASET_DELETE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"删除")),M=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dateset_modify sp_dateset_detail sp_detail",name:"DATASET_MODIFY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"修改")),Y=(0,d.default)("div",{className:"col-xs-2 sp_classify_name text-right sp_quota"},void 0,"报表权限: "),L=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_quota_query sp_quota_detail sp_detail",name:"REPORT_QUERY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"查看")),I=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_quota_add sp_quota_detail sp_detail",name:"REPORT_CREATE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"新建")),U=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_quota_del sp_quota_detail sp_detail",name:"REPORT_DELETE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"删除")),F=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_quota_modify sp_quota_detail sp_detail",name:"REPORT_MODIFY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"修改")),H=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_quota_analysis sp_quota_detail sp_detail",name:"REPORT_ANALYSIS",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"分析")),B=(0,d.default)("div",{className:"col-xs-2 sp_classify_name text-right sp_dashboard"},void 0,"仪表板权限: "),Q=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dashboard_query sp_dashboard_detail sp_detail",name:"DASHBOARD_QUERY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"查看")),j=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dashboard_add sp_dashboard_detail sp_detail",name:"DASHBOARD_CREATE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"新建")),K=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dashboard_del sp_dashboard_detail sp_detail",name:"DASHBOARD_DELETE",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"删除")),z=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dashboard_modify sp_dashboard_detail sp_detail",name:"DASHBOARD_MODIFY",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"修改")),J=(0,d.default)("label",{className:"col-xs-3 col-sm-2 sp_label"},void 0,(0,d.default)("input",{className:"sp_dashboard_analysis sp_dashboard_detail sp_detail",name:"DASHBOARD_ANALYSIS",type:"checkbox"})," ",(0,d.default)("span",{},void 0,"分析")),W=function(e){function a(e){(0,p.default)(this,a);var l=(0,r.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e));return l.createSelect=l.createSelect.bind(l),l.handleChange=l.handleChange.bind(l),l}return(0,f.default)(a,e),(0,n.default)(a,[{key:"componentWillMount",value:function(){this.props.readPrivilege()}},{key:"componentDidMount",value:function(){var e=this.props.systemPrivilege.systemPrivilegeData.result.data[0].sysPrivilege.split(" "),a=$(".sp_detail");$(".ensure").attr("disabled",!0),$(".cancel").attr("disabled",!0),a.each(function(a,l){$.inArray(l.name,e)!=-1?(l.checked=!0,(0,k.default)(l)):($(l).parents("label").css("color","#d2d6de"),(0,k.default)(l)),l.disabled=!0,(0,k.default)(l)});for(var l=[],s=this.props.systemPrivilege.systemPrivilegeData.result.data,t=0;t<s.length;t++){var d={};d.id=s[t].roleName,d.text=s[t].roleName,l.push(d)}this.createSelect(l)}},{key:"createSelect",value:function(e){var a={};a.id="select_role",a.data=e,a.tags=!1,a.placeholder="输入角色名快速查找",a.minimumResultsForSearch=2,(0,x.default)(a),(0,N.bindSelectEvent)("select_role","select2:select",this.handleChange)}},{key:"handleChange",value:function(){this.props.selectPrivilege(),$(".sp_select_role").attr("disabled",!1),$(".modify").attr("disabled",!1),$(".cancel").attr("disabled",!0),$(".ensure").attr("disabled",!0);for(var e=$(".sp_select_role").val(),a=this.props.systemPrivilege.selectSystemPrivilegeData.result.data,l=$(".sp_detail"),s=0;s<a.length;s++)a[s].roleName==e&&(a=a[s].sysPrivilege.split(" "),l.each(function(e,l){l.disabled=!1,$(l).parents("label").css("color","#000"),l.checked=!1,$.inArray(l.name,a)!=-1?(l.checked=!0,(0,k.default)(l)):($(l).parents("label").css("color","#d2d6de"),(0,k.default)(l)),l.disabled=!0,(0,k.default)(l)}))}},{key:"handleEdit",value:function(e){$(".ensure").attr("disabled",!1),$(".modify").attr("disabled",!0),$(".cancel").attr("disabled",!1),$(".sp_select_role").attr("disabled",!0);var a=$(".sp_detail");a.each(function(e,a){$(a).parents("label").css("color","#000"),a.disabled=!1,(0,k.default)(a)})}},{key:"handleModify",value:function(){var e=$(".sp_select_role option:selected").text();this.refs.sp_modify.setContent("您确定要修改：  <"+e+"> 的系统权限吗？")}},{key:"modifyOKHandle",value:function(){$(".sp_select_role").attr("disabled",!1);var e=$(".sp_select_role").val(),a=$(".sp_detail"),l={};l.roleName=e,l.sysPrivilege="",a.each(function(e,a){a.checked?l.sysPrivilege+=a.name+" ":$(a).parents("label").css("color","#d2d6de"),a.disabled=!0,(0,k.default)(a)}),this.props.modifyPrivilege(l),$(".ensure").attr("disabled",!0),$(".cancel").attr("disabled",!0),$(".modify").attr("disabled",!1),$("#sp_modify").modal("hide")}},{key:"render",value:function(){var e=this.props.systemPrivilege.systemPrivilegeData.result.data[0].roleName;return(0,d.default)("div",{className:"box box-primary"},void 0,g,(0,d.default)("div",{className:"row sp_content"},void 0,R,(0,d.default)("div",{className:"col-sm-8 col-xs-12"},void 0,(0,d.default)("div",{className:"sp_select_role_div"},void 0,(0,d.default)("select",{className:"sp_select_role form-control",name:"",id:"select_role"},void 0,(0,d.default)("option",{value:e},void 0,e))),(0,d.default)("div",{className:"nav-tabs-custom",style:{userSelect:"none"}},void 0,(0,d.default)("ul",{className:"nav nav-tabs",role:"tablist"},void 0,A,(0,d.default)("li",{className:"pull-right header"},void 0,(0,d.default)("button",{type:"submit",className:"modify btn btn-primary",onClick:this.handleEdit.bind(this)},void 0,"修改"))),(0,d.default)("div",{className:"tab-content"},void 0,(0,d.default)("div",{role:"tabpanel",className:"tab-pane active",id:"home"},void 0,(0,d.default)("div",{className:"row sp_classify"},void 0,D,S),(0,d.default)("div",{className:"row sp_classify"},void 0,O,P),(0,d.default)("div",{className:"row sp_classify"},void 0,T,(0,d.default)("div",{className:"row col-xs-10 text-center"},void 0,C,q,w,M)),(0,d.default)("div",{className:"row sp_classify"},void 0,Y,(0,d.default)("div",{className:" row col-xs-10 text-center"},void 0,L,I,U,F,H)),(0,d.default)("div",{className:"row sp_classify"},void 0,B,(0,d.default)("div",{className:" row col-xs-10 text-center"},void 0,Q,j,K,z,J))))),(0,d.default)("button",{type:"button",className:"ensure btn btn-primary sp_btn","data-toggle":"modal","data-target":"#sp_modify",onClick:this.handleModify.bind(this)},void 0,"保存"),(0,d.default)("button",{type:"button",className:"cancel btn btn-primary sp_btn",onClick:this.handleChange},void 0,"取消"))),b.default.createElement(y.default,{modalId:"sp_modify",ref:"sp_modify",title:"修改权限",okHandler:this.modifyOKHandle.bind(this)}))}}]),a}(v.Component);a.default=W}});