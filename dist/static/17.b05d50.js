webpackJsonp([17],{21:function(e,a){"use strict";function t(e){var a={data:e.data||[],destroy:!0,dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null};e.scrollX&&(a.scrollX=e.scrollX);var t=$("#"+e.id).DataTable(a);return t}function s(e,a,t,s){$("#"+e+" tbody").off(a,t).on(a,t,s)}function r(e){var a=$("#"+e).DataTable().row($(this).parents("tr")).data();return a}Object.defineProperty(a,"__esModule",{value:!0}),a.default=t,a.bindTableEvent=s,a.getTableItem=r},522:function(e,a,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var r=t(5),d=s(r),n=t(6),o=s(n),l=t(3),i=s(l),u=t(4),c=s(u),f=t(8),v=s(f),m=t(7),p=s(m),b=t(2),h=s(b),g=t(183),U=s(g),_=t(21),y=s(_),P=t(10),w=t(321),H=s(w),T=(0,d.default)("tr",{},void 0,(0,d.default)("th",{},void 0,"用户名"),(0,d.default)("th",{},void 0,"姓名"),(0,d.default)("th",{},void 0,"角色"),(0,d.default)("th",{},void 0,"创建时间")),E=(0,d.default)("tr",{},void 0,(0,d.default)("th",{},void 0,"用户名"),(0,d.default)("th",{},void 0,"姓名"),(0,d.default)("th",{},void 0,"角色"),(0,d.default)("th",{},void 0,"创建时间"),(0,d.default)("th",{},void 0,"操作")),N=function(e){function a(e){(0,i.default)(this,a);var t=(0,v.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e));return t.createTable=t.createTable.bind(t),t.removeHandler=t.removeHandler.bind(t),t.removeOKHandler=t.removeOKHandler.bind(t),t.resetPasswdHandler=t.resetPasswdHandler.bind(t),t.resetPasswdOKHandler=t.resetPasswdOKHandler.bind(t),t.userDetail=t.userDetail.bind(t),t.userUpdate=t.userUpdate.bind(t),t.createUserHander=t.createUserHander.bind(t),t.saveUserCom=t.saveUserCom.bind(t),t}return(0,p.default)(a,e),(0,c.default)(a,[{key:"componentWillMount",value:function(){this.props.readUser()}},{key:"componentDidUpdate",value:function(){this.createTable(this.props.usermanage.usermanagesData.result.data)}},{key:"createTable",value:function(e){var a=sessionStorage.getItem("XDataUserName"),t={};t.id="userList",t.columns=[{data:"userName",defaultContent:"-"},{data:"name",defaultContent:"-"},{data:"roleName",defaultContent:"-"},{data:"createTime",defaultContent:"-"}],t.order=[[3,"desc"]];var s=sessionStorage.getItem("userRolePermission");s.indexOf("USER_")!=-1&&(t.columnDefs=[{targets:4,render:function(e,t,r){var d="";return s.indexOf("USER_QUERY")!=-1&&(d+="<a href='javascript:void(0);'  class='userDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),s.indexOf("USER_MODIFY")!=-1&&(d+="<a href='javascript:void(0);' class='userUpdate btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),s.indexOf("USER_MODIFY")!=-1&&(d+="<a href='#'  class='resetPasswd btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#resetPasswd\" ><i class='fa fa-rotate-left'></i> 重置密码</a> "),"admin"!=r.userName&&r.userName!=a&&s.indexOf("USER_DELETE")!=-1&&(d+="<a href='#' class='userRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeUser\"><i class='fa fa-trash-o'></i> 删除</a>"),d}}]),t.data=e,(0,y.default)(t),(0,_.bindTableEvent)("userList","click","a.userRemove",this.removeHandler),(0,_.bindTableEvent)("userList","click","a.resetPasswd",this.resetPasswdHandler),(0,_.bindTableEvent)("userList","click","a.userDetail",this.userDetail),(0,_.bindTableEvent)("userList","click","a.userUpdate",this.userUpdate)}},{key:"saveUserCom",value:function(e){var a=$("#userList").DataTable().row($(e.currentTarget).parents("tr")).data();return this.props.selectUser(a),a}},{key:"removeHandler",value:function(e){var a=this.saveUserCom(e);this.refs.delUser.setContent("您确定要删除用户："+a.userName+"（"+a.name+"）吗？")}},{key:"removeOKHandler",value:function(){var e=[];e.push(this.props.usermanage.selectedRecord.userName),this.props.delUser(e),$("#removeUser").modal("hide"),window.location.reload()}},{key:"resetPasswdHandler",value:function(e){var a=this.saveUserCom(e);this.refs.resetPasswd.setContent("您确定要重置用户："+a.userName+"（"+a.name+"）的密码吗？（重置密码：000000）")}},{key:"resetPasswdOKHandler",value:function(){var e=(0,H.default)("000000").toUpperCase();this.props.resUserPass(this.props.usermanage.selectedRecord.userName,e),0==this.props.usermanage.resUserPasswd.code&&($("#resetPasswd").modal("hide"),(0,P.success)("重置成功！"))}},{key:"userDetail",value:function(e){var a=this.saveUserCom(e);this.props.history.replace("/usermanage/detail/"+a.userName)}},{key:"userUpdate",value:function(e){var a=this.saveUserCom(e);this.props.history.replace("/usermanage/update/"+a.userName)}},{key:"createUserHander",value:function(){this.props.history.replace("/usermanage/add")}},{key:"render",value:function(){var e=T,a=sessionStorage.getItem("userRolePermission");return a.indexOf("USER_")!=-1&&(e=E),(0,d.default)("div",{id:"userManage",className:"box box-primary"},void 0,(0,d.default)("div",{className:"row"},void 0,(0,d.default)("div",{className:"col-md-12"},void 0,(0,d.default)("div",{className:"box-header"},void 0,(0,d.default)("button",{type:"submit",className:"btn btn-primary",onClick:this.createUserHander},void 0,"新建")),(0,d.default)("div",{className:"box-body"},void 0,(0,d.default)("table",{id:"userList",className:"table table-striped table-bordered"},void 0,(0,d.default)("thead",{},void 0,e))))),h.default.createElement(U.default,{modalId:"removeUser",ref:"delUser",title:"删除用户",okHandler:this.removeOKHandler}),h.default.createElement(U.default,{modalId:"resetPasswd",ref:"resetPasswd",title:"重置密码",okHandler:this.resetPasswdOKHandler}))}}]),a}(b.Component);a.default=N}});