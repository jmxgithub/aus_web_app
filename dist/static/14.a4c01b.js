webpackJsonp([14],{21:function(e,t){"use strict";function a(e){var t={data:e.data||[],destroy:!0,dom:e.dom||'<"top"f>rt<"bottom"lip>',columns:e.columns||[],language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示第 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条结果，共 0 条",sInfoFiltered:"(由 _MAX_ 条结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}},paging:e.paging,pageLength:e.pageLength||10,columnDefs:e.columnDefs||"",order:e.order||[],createdRow:e.createdRow||null};e.scrollX&&(t.scrollX=e.scrollX);var a=$("#"+e.id).DataTable(t);return a}function d(e,t,a,d){$("#"+e+" tbody").off(t,a).on(t,a,d)}function n(e){var t=$("#"+e).DataTable().row($(this).parents("tr")).data();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.bindTableEvent=d,t.getTableItem=n},201:function(e,t){"use strict";function a(e){var t=$(e.parent).qtip({content:e.content||"",position:{my:"left center",at:"bottom right",target:$(e.parent)},style:{classes:"qtip-blue qtip-shadow"},show:{event:e.event||"mouseenter"}});return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},508:function(e,t,a){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(5),r=d(n),s=a(6),l=d(s),o=a(3),i=d(o),u=a(4),c=d(u),f=a(8),v=d(f),p=a(7),m=d(p),b=a(2),h=d(b),T=a(183),g=d(T),D=a(197),_=a(21),y=d(_),E=a(201),H=d(E),w=a(217),k=d(w),N=(0,r.default)("tr",{},void 0,(0,r.default)("th",{},void 0,"名称"),(0,r.default)("th",{},void 0,"记录数"),(0,r.default)("th",{},void 0,"空间大小"),(0,r.default)("th",{},void 0,"状态"),(0,r.default)("th",{},void 0,"可见性"),(0,r.default)("th",{},void 0,"创建人"),(0,r.default)("th",{},void 0,"创建时间")),O=(0,r.default)("tr",{},void 0,(0,r.default)("th",{},void 0,"名称"),(0,r.default)("th",{},void 0,"记录数"),(0,r.default)("th",{},void 0,"空间大小"),(0,r.default)("th",{},void 0,"状态"),(0,r.default)("th",{},void 0,"可见性"),(0,r.default)("th",{},void 0,"创建人"),(0,r.default)("th",{},void 0,"创建时间"),(0,r.default)("th",{},void 0,"操作")),A=(0,r.default)("button",{type:"submit",name:"createDataset",className:"btn btn-primary"},void 0,"新建"),L=function(e){function t(e){(0,i.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.createTable=a.createTable.bind(a),a.addHandler=a.addHandler.bind(a),a.detailHandler=a.detailHandler.bind(a),a.editHandler=a.editHandler.bind(a),a.removeHandler=a.removeHandler.bind(a),a.removeOKHandler=a.removeOKHandler.bind(a),a.clickOwnerHandler=a.clickOwnerHandler.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.readDataset()}},{key:"componentDidUpdate",value:function(){this.props.dataset.datasetList.result.data&&this.createTable(this.props.dataset.datasetList.result.data),$('button[name = "createDataset"]').on("click",this.addHandler)}},{key:"createTable",value:function(e){var t={};t.id="datasetList",t.scrollX=!1,t.columns=[{data:"datasetName",defaultContent:"-"},{data:"count",defaultContent:"-"},{data:"size",render:function(e,t,a,d){return(0,D.unitTransform)(e)},defaultContent:"-"},{data:"status",render:function(e,t,a,d){return"ONLINIE"==e?"上线":"下线"},defaultContent:"-"},{data:"visable",render:function(e,t,a,d){return"PRIVATE"==e?"私有":"共享"},defaultContent:"-"},{data:"owner",defaultContent:"-"},{data:"createTime",defaultContent:"-"}],t.order=[[6,"desc"]],t.columnDefs=[{targets:5,render:function(e,t,a){var d='<a href="javascript:void(0);" class="owner">'+a.owner+"</a> ";return d}}];var a=sessionStorage.getItem("userRolePermission"),d=sessionStorage.getItem("XDataUserName");a.indexOf("DATASET_")!=-1&&t.columnDefs.push({targets:7,render:function(e,t,n){var r="";return a.indexOf("DATASET_QUERY")!=-1&&(r+="<a href='javascript:void(0);'  class='datasetDetail btn btn-default btn-xs'  ><i class='fa fa-file-text-o'></i> 详情</a> "),n.owner==d&&a.indexOf("DATASET_MODIFY")!=-1&&(r+="<a href='javascript:void(0);' class='datasetEdit btn btn-default btn-xs'><i class='fa fa-pencil-square-o'></i> 修改</a> "),n.owner==d&&a.indexOf("DATASET_DELETE")!=-1&&(r+="<a href='javascript:void(0);' class='datasetRemove btn btn-default btn-xs' data-toggle=\"modal\" data-target=\"#removeDataset\"><i class='fa fa-trash-o'></i> 删除</a> "),r}}),t.data=e,(0,y.default)(t),(0,_.bindTableEvent)("datasetList","click","a.datasetDetail",this.detailHandler),(0,_.bindTableEvent)("datasetList","click","a.datasetEdit",this.editHandler),(0,_.bindTableEvent)("datasetList","click","a.datasetRemove",this.removeHandler),(0,_.bindTableEvent)("datasetList","click","a.owner",this.clickOwnerHandler)}},{key:"clickOwnerHandler",value:function(e){var t=k.default.userDetail($(e.currentTarget).text());t=t.result.detail;var a=(0,H.default)({parent:e.currentTarget,event:"click",content:"<dl><dt>用户名：</dt><dd>"+t.userName+"</dd></dl>\n            <dl><dt>姓名：</dt><dd>"+t.name+"</dd></dl>\n            </dl><dl><dt>部门：</dt><dd>"+t.department+"</dd></dl>\n            </dl><dl><dt>职位：</dt><dd>"+t.position+"</dd></dl>\n            </dl><dl><dt>电话：</dt><dd>"+t.phoneNo+"</dd></dl>\n            <dl><dt>邮箱：</dt><dd>"+t.email+"</dd></dl>"}),d=a.qtip("api");d.show()}},{key:"addHandler",value:function(){this.props.history.replace("/dataSet/add")}},{key:"detailHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.props.history.replace("/dataSet/detail/"+t.datasetName)}},{key:"editHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.props.history.replace("/dataSet/update/"+t.datasetName)}},{key:"removeHandler",value:function(e){var t=$("#datasetList").DataTable().row($(e.currentTarget).parents("tr")).data();this.props.selectDataset(t),this.refs.delDataset.setContent("您确定要删除数据集："+t.datasetName+"吗？")}},{key:"removeOKHandler",value:function(){var e=[];e.push(this.props.dataset.selectedRecord.datasetName),this.props.deleteDataset(e),$("#removeDataset").modal("hide"),window.location.reload()}},{key:"render",value:function(){var e=N,t=sessionStorage.getItem("userRolePermission");t.indexOf("DATASET_")!=-1&&(e=O);var a="";return sessionStorage.getItem("userRolePermission").indexOf("DATASET_CREATE")!=-1&&(a=A),(0,r.default)("div",{id:"datasetManage",className:"box box-primary"},void 0,(0,r.default)("div",{className:"row"},void 0,(0,r.default)("div",{className:"col-md-12"},void 0,(0,r.default)("div",{className:"box-header"},void 0,a),(0,r.default)("div",{className:"box-body"},void 0,(0,r.default)("table",{id:"datasetList",className:"table table-striped table-bordered"},void 0,(0,r.default)("thead",{},void 0,e))))),h.default.createElement(g.default,{modalId:"removeDataset",ref:"delDataset",title:"删除数据集",okHandler:this.removeOKHandler}))}}]),t}(b.Component);t.default=L}});